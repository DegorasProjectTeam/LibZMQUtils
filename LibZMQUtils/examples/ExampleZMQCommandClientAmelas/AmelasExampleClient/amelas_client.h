
// =====================================================================================================================
#pragma once
// =====================================================================================================================

// C++ INCLUDES
// =====================================================================================================================
#include <string>
// =====================================================================================================================

// ZMQUTILS INCLUDES
// =====================================================================================================================
#include <LibZMQUtils/CommandClient>
#include <LibZMQUtils/Utils>
// =====================================================================================================================

// AMELAS INCLUDES
// =====================================================================================================================
#include <AmelasExampleServer/amelas_server.h>
#include <AmelasExampleServer/common.h>
// =====================================================================================================================

// PROJECT INCLUDES
// =====================================================================================================================
// =====================================================================================================================

// AMELAS NAMESPACES
// =====================================================================================================================
namespace amelas{
// =====================================================================================================================

class AmelasClient : public zmqutils::CommandClientBase
{
public:

    AmelasClient(const std::string &server_endpoint) :
        zmqutils::CommandClientBase(server_endpoint)
    {}

private:

    void onSendCommand(const RequestData& req, const zmq::multipart_t& msg)
    {
        // Log.
        std::cout << std::string(80, '-') << std::endl;
        std::cout<<"<AMELAS CLIENT>"<<std::endl;
        std::cout<<"-> ON SEND COMMAND: "<<std::endl;
        std::cout<<"Time: "<<zmqutils::utils::currentISO8601Date()<<std::endl;
        std::cout<<"Command: "<<static_cast<int>(req.command)<<std::endl;
        std::cout<<"Params size: "<<req.params_size<<std::endl;
        std::cout<<"Msg parts: "<<msg.size()<<std::endl;
        std::cout << std::string(80, '-') << std::endl;
    }
};

} // END NAMESPACES.
// =====================================================================================================================
